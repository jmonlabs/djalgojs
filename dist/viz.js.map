{"version":3,"file":"viz.js","sources":["../src/visualization-plotly.ts"],"sourcesContent":["// Visualization module that uses global Plotly\n// This module expects Plotly to be available globally\n\n// Simple visualization functions that use global Plotly\nexport class PlotlyVisualization {\n  \n  /**\n   * Create a simple scatter plot\n   */\n  static scatter(x: number[], y: number[], element: string | HTMLElement, title = 'Scatter Plot') {\n    const Plotly = (globalThis as any).Plotly || (window as any)?.Plotly;\n    if (typeof Plotly === 'undefined') {\n      throw new Error('Plotly.js must be loaded globally before using visualization functions');\n    }\n    \n    const data = [{\n      x: x,\n      y: y,\n      mode: 'markers',\n      type: 'scatter'\n    }];\n    \n    const layout = {\n      title: { text: title },\n      xaxis: { title: 'X' },\n      yaxis: { title: 'Y' }\n    };\n    \n    return Plotly.newPlot(element, data, layout);\n  }\n  \n  /**\n   * Create a line plot\n   */\n  static line(x: number[], y: number[], element: string | HTMLElement, title = 'Line Plot') {\n    const Plotly = (globalThis as any).Plotly || (window as any)?.Plotly;\n    if (typeof Plotly === 'undefined') {\n      throw new Error('Plotly.js must be loaded globally before using visualization functions');\n    }\n    \n    const data = [{\n      x: x,\n      y: y,\n      mode: 'lines',\n      type: 'scatter'\n    }];\n    \n    const layout = {\n      title: { text: title },\n      xaxis: { title: 'X' },\n      yaxis: { title: 'Y' }\n    };\n    \n    return Plotly.newPlot(element, data, layout);\n  }\n  \n  /**\n   * Create a polar plot for polyloops\n   */\n  static polyloop(layers: any[], element: string | HTMLElement, title = 'Polyloop') {\n    const Plotly = (globalThis as any).Plotly || (window as any)?.Plotly;\n    if (typeof Plotly === 'undefined') {\n      throw new Error('Plotly.js must be loaded globally before using visualization functions');\n    }\n    \n    const traces = layers.map((layer, i) => ({\n      r: layer.values || layer.durations,\n      theta: layer.angles || layer.positions,\n      mode: 'markers',\n      type: 'scatterpolar',\n      name: `Layer ${i + 1}`,\n      marker: {\n        size: 8,\n        opacity: 0.7\n      }\n    }));\n    \n    const layout = {\n      title: { text: title },\n      polar: {\n        radialaxis: {\n          visible: true,\n          range: [0, Math.max(...layers.flatMap(l => l.values || l.durations || [1]))]\n        }\n      }\n    };\n    \n    return Plotly.newPlot(element, traces, layout);\n  }\n}\n\nexport { PlotlyVisualization as Viz };"],"names":[],"mappings":"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"}